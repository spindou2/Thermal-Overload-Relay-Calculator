<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Kalkulator Setting TOR (Thermal Overload Relay)</title>
  <style>
    body { font-family: system-ui, Arial; max-width:800px; margin:24px auto; padding:0 16px; color:#111; }
    h1 { font-size:1.4rem; margin-bottom:6px; }
    label { display:block; margin-top:12px; font-weight:600; }
    input, select { width:100%; padding:8px; margin-top:6px; box-sizing:border-box; }
    .row { display:flex; gap:8px; }
    .col { flex:1; }
    .result { background:#f4f6fb; padding:12px; margin-top:16px; border-radius:8px; }
    .small { font-size:0.9rem; color:#444; }
    button { margin-top:12px; padding:10px 14px; border:0; background:#2563eb; color:white; border-radius:8px; cursor:pointer; }
    footer { margin-top:18px; font-size:0.85rem; color:#555; }
  </style>
</head>
<body>
  <div style="text-align:center; padding:10px 0;">
    <img src="https://lirp.cdn-website.com/2f73b385/dms3rep/multi/opt/Logo+SPINDO+-+New-1920w.jpg" style="max-width:180px; height:auto; margin:0;">
  </div>
  <h1>Kalkulator Setting TOR</h1>
  <div class="small">Masukkan daya motor (kW atau HP). Pilih 1-fase atau 3-fase, tegangan, dan (opsional) efisiensi/power factor.</div>

  <label>Input daya</label>
  <div class="row">
    <input id="power" type="number" placeholder="Masukkan angka daya" />
    <select id="unit" style="max-width:120px;">
      <option value="kW">kW</option>
      <option value="HP">HP</option>
    </select>
  </div>

  <label>Jenis</label>
  <div class="row">
    <select id="phase" class="col">
      <option value="3">3-fase</option>
      <option value="1">1-fase</option>
    </select>
    <select id="voltage" class="col">
      <option value="400">400 V (3~ Industri)</option>
      <option value="380">380 V</option>
      <option value="230">230 V (1~)</option>
      <option value="415">415 V</option>
      <option value="480">480 V</option>
      <option value="other">Lainnya...</option>
    </select>
    <input id="otherVoltage" placeholder="Masukkan V jika pilih Lainnya" style="display:none; max-width:160px;" />
  </div>

  <label>Efisiensi Motor (η) — default 0.90</label>
  <input id="eff" type="number" step="0.01" value="0.90" />

  <label>Cos Phi Motor (pf) — default 0.85</label>
  <input id="pf" type="number" step="0.01" value="0.85" />

  <label>Persentase seting TOR</label>
  <select id="torPercent">
    <option value="1.15">115%</option>
    <option value="1.20" selected>120%</option>
    <option value="1.25">125%</option>
  </select>

  <button id="calcBtn">Hitung</button>

  <div id="result" class="result" style="display:none;">
    <div><strong>Arus nominal motor (A):</strong> <span id="iFL">-</span> A</div>
    <div><strong>Rekomendasi Arus TOR:</strong> <span id="torAmp">-</span> A (<span id="torPct">-</span> % dari IFL)</div>
    <div class="small" style="margin-top:8px;">
      Keterangan: Formula 3-fase: I = P(kW)*1000 / (√3 * V * η * pf). Jika ada data nameplate, gunakan arus nameplate.
    </div>
  </div>

  <footer>
    Simulasi penentuan Arus setting TOR dibuat untuk mempermudah operator Unit II dilapangan dalam bekerja
  </footer>

  <script>
    const powerEl = document.getElementById('power');
    const unitEl = document.getElementById('unit');
    const phaseEl = document.getElementById('phase');
    const voltEl = document.getElementById('voltage');
    const otherV = document.getElementById('otherVoltage');
    const effEl = document.getElementById('eff');
    const pfEl = document.getElementById('pf');
    const torPctEl = document.getElementById('torPercent');
    const calcBtn = document.getElementById('calcBtn');
    const resDiv = document.getElementById('result');
    const iFLspan = document.getElementById('iFL');
    const torAmpSpan = document.getElementById('torAmp');
    const torPctSpan = document.getElementById('torPct');

    voltEl.addEventListener('change', ()=> {
      if (voltEl.value === 'other') otherV.style.display = 'inline-block';
      else { otherV.style.display = 'none'; otherV.value = ''; }
    });

    calcBtn.addEventListener('click', ()=> {
      const rawPower = parseFloat(powerEl.value);
      if (isNaN(rawPower) || rawPower <= 0) { alert('Masukkan daya yang valid.'); return; }
      let PkW = rawPower;
      if (unitEl.value === 'HP') PkW = rawPower * 0.7457;

      let V = voltEl.value === 'other' ? parseFloat(otherV.value) : parseFloat(voltEl.value);
      if (isNaN(V) || V <= 0) { alert('Masukkan tegangan yang valid.'); return; }

      const eff = parseFloat(effEl.value) || 0.9;
      const pf = parseFloat(pfEl.value) || 0.85;
      const phase = parseInt(phaseEl.value);
      let Ifl;
      if (phase === 3) {
        Ifl = (PkW * 1000) / (Math.sqrt(3) * V * eff * pf);
      } else {
        Ifl = (PkW * 1000) / (V * eff * pf);
      }
      // round sensibly
      const IflRound = Math.round(Ifl * 100) / 100;
      const torPct = parseFloat(torPctEl.value);
      const torAmp = Math.round(Ifl * torPct * 100) / 100;

      iFLspan.textContent = IflRound.toLocaleString();
      torAmpSpan.textContent = torAmp.toLocaleString();
      torPctSpan.textContent = Math.round(torPct*100) + '%';
      resDiv.style.display = 'block';
    });

  </script>
</body>
</html>















